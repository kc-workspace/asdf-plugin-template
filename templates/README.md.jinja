{%- from pathjoin('macros', 'github.jinja') import name, url, https -%}

<h1 align="center">
  {{ plugin_name }}
</h1>

<!-- Description section -->
<p align="center">
  <strong>{{ app_desc }}</strong>
</p>

<!-- Badges section -->
<p align="center">
  <a href="{{ url(plugin_org, plugin_name) }}/actions/workflows/main.yml">
    <img
      alt="github-main"
      src="https://img.shields.io/github/actions/workflow/status/{{ name(plugin_org, plugin_name) }}/main.yml?style=flat-square&logo=github">
  </a>
  <a href="{{ url(plugin_org, plugin_name) }}/releases">
    <img
      alt="version"
      src="https://img.shields.io/github/v/release/{{ name(plugin_org, plugin_name) }}?style=flat-square&logo=github">
  </a>
  <a href="{{ url(plugin_org, plugin_name) }}/commits/main">
    <img
      alt="version"
      src="https://img.shields.io/github/last-commit/{{ name(plugin_org, plugin_name) }}/main?style=flat-square&logo=github">
  </a>
</p>

<!-- Links section -->
<h3 align="center">
  <a href="{{ app_website }}">{{ app_name }}</a>
  <span> Â· </span>
  <a href="https://asdf-vm.com">asdf</a>
</h3>

> This is an asdf-vm plugin generated from [template][template-gh].

## Before start

> If you still see this section, mean this plugin is not ready yet

There are several things template cannot generate for you,
below are a list of thing we should do:

1. make sure that your GitHub repository already exist at [{{ name(plugin_org, plugin_name) }}][plugin-gh]
2. please read [plugins create section][asdf-create-plugin] for more information
3. remove `before start` section once you completed

## Install

Plugin:

```sh
asdf plugin add "{{ app_name }}" "{{ https(plugin_org, plugin_name) }}"
```

App:

```sh
# Show all installable versions
asdf list all {{ app_name }}

# Install latest version
asdf install {{ app_name }} latest

# Set a version globally
asdf global {{ app_name }} latest
# Set a version locally
asdf local {{ app_name }} latest

# Now {{ app_name }} commands are available
{{ app_name }}
```

Check the [asdf][asdf-link] readme for instructions on
how to install & manage versions.

## Features

Plugins generated from asdf-plugin-template repository will
contains several extra features for every user including all below.

- `$DEBUG=<any-string>` to enabled debug mode
- `$ASDF_INSECURE=<any-string>` to disable security features (e.g. checksum)
- `$ASDF_NO_CHECK=<any-string>` to disable pre-check features (e.g. check-cmd)
- `$ASDF_OVERRIDE_OS=<os>` to override os name
- `$ASDF_OVERRIDE_ARCH=<arch>` to override arch name
- `$GITHUB_TOKEN=<token>` to pass github token on http request
- `$ASDF_LOG_FORMAT=<format>` to custom log format, there are several variables
  - **{datetime}** - for current datetime
  - **{date}** - for current date
  - **{time}** - for current time
  - **{level}** - for log level (always be 3 characters uppercase)
  - **{namespace}** - for formatted namespace (always have same lenght)
  - **{ns}** - for raw namespace (no formatting applied)
  - **{message}** - for log message

### Addition Features

The plugins might contains additional features
in addition to default features above.
You can take a look at [README.plugin.md][app-readme]

## Contributors

1. Only `bin/*` and `lib/utils.sh` are open for modify
2. There several functions available on bin/* script [bin/README.md]
3. The function defined on `lib/utils.sh` will be available everywhere
4. New create `bin/*` script should use below template as starter

```bash
#!/usr/bin/env bash

## <description>
## https://asdf-vm.com/plugins/create.html

## -----------------------
## Customization functions

kc_asdf_main() {
  return 0
}

## -----------------------

set -euo pipefail

export KC_ASDF_PLUGIN_ENTRY_PATH=${BASH_SOURCE[0]}
export KC_ASDF_PLUGIN_ENTRY_NAME
KC_ASDF_PLUGIN_ENTRY_NAME="$(basename "$KC_ASDF_PLUGIN_ENTRY_PATH")"
export KC_ASDF_PLUGIN_PATH
KC_ASDF_PLUGIN_PATH=$(dirname "$(dirname "$KC_ASDF_PLUGIN_ENTRY_PATH")")

# shellcheck source-path=SCRIPTDIR/../lib/commands.sh
source "$KC_ASDF_PLUGIN_PATH/lib/commands.sh" "$@"
```

<!-- LINKS SECTION -->

[app-readme]: ./README.plugin.md
[plugin-gh]: {{ url(plugin_org, plugin_name) }}
[template-gh]: https://github.com/kc-workspace/asdf-plugin-template
[asdf-link]: https://github.com/asdf-vm/asdf
[asdf-create-plugin]: https://asdf-vm.com/plugins/create.html
